var http = require('http');
var Vow = require('vow');


var httpPromise = {};

/**
 * Получить данные путем HTTP GET запроса
 * @param {String} url Адрес
 * @returns {[type]} [description]
 */
httpPromise.get = function(url) {
	var promise = Vow.promise();
	if (!url) {
		return promise.reject('HTTP GET - not set URL');
	}
	http.get(url, function(res) {
		var responce = res;
		responce.url = url;
		res.setEncoding('utf8');
		res.on('data', function (chunk) {
			responce.body += chunk;
		});
		res.on('end', function() {
			promise.fulfill(responce);
		});
	}).on('error', function(e) {
		responce.error = e
		promise.reject(responce);
	});
	return promise;
};

module.exports = httpPromise;